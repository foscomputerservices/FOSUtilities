# ``FOSMVVM``

A library that provides support for implementing the **Model-View-ViewModel** pattern between **Swift-based** applications and **Swift-based** web servers.

## Overview

In FOS's implementation of the [Model-View-ViewModel](https://w.wiki/4T5B) pattern, we use the following definitions:

* **Model**: A database record stored and retrieved from a store. Typically via [Fluent](https://docs.vapor.codes/fluent/overview/).
* **View**: Typically a User Interface element that is displayed to the application user.  Typically a [SwiftUI](https://developer.apple.com/xcode/swiftui/) view.
* **View-Model**: An implementation of ``ViewModel`` (or subtypes) that provides a *View*-specific mapping from one or more **Model**s to an arrangement of data that makes sense for the **View**.  The **ViewModel** is generated by the web server and is fully localized before being transmitted to the client application.   

## Server Initialization

### Vapor Web Servers

To initialize FOS-MVVM in your [Vapor](https://docs.vapor.codes) server add the following code
to your application's initialization routine:

```swift
app.initYamlLocalization(
    bundle: Bundle.module,
    resourceDirectoryName: "Localization"
)
```

### Manual Initialization

To initialize FOS-MVVM in non-Vapor servers, add the following code
to your application's initialization routine:

```swift
let localizationStore = try await Bundle.module.yamlLocalization(
    resourceDirectoryName: "Localization"
)
```

### Locating the Resource Directory Name

The *resourceDirectoryName* should be set to the same name as specified in the application's Package.swift target:

```swift
.target(
    name: "MyApp",
    dependencies: [
        // ...
    ],
    resources: [
        .copy("Localization") // <--- resourceDirectoryName
    ]
)
```

> This example shows that all localization (YAML) files can be found under Sources/MyApp/Localization.

## Client Application Initialization

### SwiftUI

In order to access the server from a client SwiftUI application, an ``MVVMEnvironment`` instance needs to be configured and added to the [SwiftUI Environment](https://developer.apple.com/documentation/swiftui/environment).

```swift
import FOSFoundation
import FOSMVVM
import SwiftUI

@main
struct MyApp: App {
    var body: some Scene {
        WindowGroup {
            Text("Hello World!")
        }
        .environment(
            MVVMEnvironment(
                serverBaseURL: URL(string: "http://localhost:8080")!
            )
        )
    }
}
```
